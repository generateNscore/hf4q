"function drawScales() {\n\n  ctx.clearRect(0,0,cw,ch);\n\n  var circXo=cw/2, circYo=210.5, circR=200;\n  var angle=0, dx=0, dy=0;\n\n  ctx.beginPath();\n  ctx.strokeStyle=\"black\";\n  ctx.arc(circXo, circYo, circR, 0, 2*Math.PI);\n  ctx.stroke();\n  ctx.closePath();\n\n  ctx.fillStyle=\"black\";\n  for (let j=0; j<360; j+=15) {\n    angle=j*Math.PI/180;\n    dx=circR*Math.cos(angle)+circXo;\n    dy=circR*Math.sin(angle)+circYo;\n    ctx.beginPath();\n    ctx.arc(dx, dy, dotR, 0, 2*Math.PI);\n    ctx.fill();\n    dots.push({x:dx, y:dy});\n  }\n  canvasImage=ctx.getImageData(0,0,cw,ch);\n}\n\n\nfunction onmouseup(e) {\n  e.preventDefault();\n  var bbox = cnvs.getBoundingClientRect();\n  var pxX=e.clientX-bbox.left*(cw/bbox.width);\n  var pxY=e.clientY-bbox.top*(ch/bbox.height);\n\n  if (dragging == true) {\n    for (j=0; j<dots.length; j++) {\n      if ((dots[j].x-pxX)**2+(dots[j].y-pxY)**2<=dotR**2) {\n        lines[lines.length-1][1]=dots[j];\n        dragging=false;\n        dotChosen=9999999;\n        break;\n      }\n    }\n  }\n  addAnswers2Textarea();\n}\n\nfunction componentToHex(c) {\n  const hex = c.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n  return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nfunction onmousedown(e) {\n  e.preventDefault();\n  var bbox = cnvs.getBoundingClientRect();\n  var pxX=e.clientX-bbox.left*(cw/bbox.width);\n  var pxY=e.clientY-bbox.top*(ch/bbox.height);\n\n  for (let j=0; j<dots.length; j++) {\n    if ((dots[j].x-pxX)**2+(dots[j].y-pxY)**2<=dotR**2) {\n      dotChosen=dots[j];\n      if (Red==null) color=\"black\";\n      else {\n      color=rgbToHex(Number(document.getElementById(\"Red\").value), Number(document.getElementById(\"Green\").value), Number(document.getElementById(\"Blue\").value));}\n      lines.push([dotChosen, dotChosen, color]);\n      dragging=true;\n      break;\n    }\n  }\n }\n\n\nfunction onmousemove(e) {\n  e.preventDefault();\n  var bbox = cnvs.getBoundingClientRect();\n  pxX=e.clientX-bbox.left*(cw/bbox.width);\n  pxY=e.clientY-bbox.top*(ch/bbox.height);\n\n  if (dragging == true) {\n     lines[lines.length-1][1]={x:pxX, y:pxY};\n     drawAll();\n  }\n}\n\n\nfunction addAnswers2Textarea() {\n  const textarea = document.getElementById(\"inputTextToSave\");\n  var text = textarea.value;\n  const searchTerm = \"--------------------------------------------------------------------------------------------------------------------\";\n  const indexOfFirst = text.indexOf(searchTerm);\n  var newText = text.slice(0, indexOfFirst+searchTerm.length);\n\n  for (let q=0; q<=Qmax; q++) {\n    var ans = \"\";\n    for (let j=0; j<lines.length; j++) {\n      ans += (j+1).toString()+\": [\"+JSON.stringify(lines[j][0])+ \", \"+JSON.stringify(lines[j][1]) +\", \"+lines[j][2]+\"], \";\n    }\n    newText += String.fromCharCode(13)+(q+1).toString()+\": \" + ans;\n  }\n  textarea.value = newText;\n}\n\n\n\nfunction drawAll() {\n  ctx.putImageData(canvasImage,0,0);\n \n  for (let j=0; j<lines.length; j++) {\n    ctx.beginPath();\n    ctx.moveTo(lines[j][0].x, lines[j][0].y);\n    ctx.lineTo(lines[j][1].x, lines[j][1].y);\n    ctx.strokeStyle=lines[j][2];\n    ctx.stroke();\n  }\n}\n\ncnvs.addEventListener('mouseup', onmouseup);\ncnvs.addEventListener('mousedown', onmousedown);\ncnvs.addEventListener('mousemove', onmousemove);\n\nvar canvasImage;\nvar Red=document.getElementById(\"Red\");\ncnvs.height=431;\ncnvs.width=window.innerWidth;\nconst ch=cnvs.height, cw=cnvs.width;\nvar dragging=false;\nvar lines=[];\nvar dots=[];\nvar dotR=4;\nvar dotChosen=9999999;\ndrawScales();\ndrawAll();"